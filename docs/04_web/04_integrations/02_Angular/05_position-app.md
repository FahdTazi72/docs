---
title: 'Angular - Position app'
sidebar_label: 'Position app'
id: angular-position-app
keywords: [web, integrations, angular]
tags:
    - web
    - integrations
    - angular
---

# Angular Position app

## Introduction

This tutorial will guide you through creating a responsive Angular application with layout using the `grid-layout` component. Additionally, it will demonstrate the integration of an `entity-management` for handling trade and position data, as well as the incorporation of a donut chart to visualize the data. The tutorial assumes you have a basic understanding of Angular.

### Project setup
To set up your project run the following command 
```shell
git clone https://github.com/genesiscommunitysuccess/integration-examples.git
```
```shell
cd integration-examples/angular/position-app-starter
```
```shell
npm install
```
```shell
npm start
```

## Step 1: Set Up the Grid Layout

### 1.1 Create a Grid Layout with Tiles

```html title="home.component.html"
<zero-grid-layout row-count="2" col-count="2" class="content-around spacing-4x" >
  <!-- Tile 1: Positions -->
  <zero-grid-layout-item col-number="1" row-number="1" width="1" height="1" style="background-color: grey">
    <!-- Content for Positions -->
  </zero-grid-layout-item>

  <!-- Tile 2: Entity Management - Trades -->
  <zero-grid-layout-item col-number="2" row-number="1" width="1" height="1" style="background-color: darkgrey">
    <!-- Entity Manager for ALL_TRADES -->
  </zero-grid-layout-item>

  <!-- Tile 3: Donut Chart -->
  <zero-grid-layout-item col-number="1" row-number="2" width="1" height="1" style="background-color: lightgrey">
    <!-- Donut Chart -->
  </zero-grid-layout-item>

  <!-- Tile 4: Line Chart -->
  <zero-grid-layout-item col-number="2" row-number="2" width="1" height="1">
    <!-- Line Chart -->
  </zero-grid-layout-item>
</zero-grid-layout>
```

In your browser you should see following placeholders for our content

![](/img/angular-tutorial-layout.png)

## Step 2: Display data

### 2.1 Add Positions Grid with grid-pro

```html title="home.component.html"
<!-- Content for Positions -->
  <zero-grid-pro>
    <grid-pro-genesis-datasource
      resource-name="ALL_POSITIONS"
    ></grid-pro-genesis-datasource>
  </zero-grid-pro>
```

Browser should reload automatically, and you should be able to see grid with populated data

![](/img/angular-tutorial-grid.png)

### 2.2 Add Entity Management for Trades

```html title="home.component.html"
<!-- Entity Manager for ALL_TRADES -->
  <entity-management
    resourceName="ALL_TRADES"
    [createFormUiSchema]="addTradeFormSchema"
    title="TRADES"
    createEvent="EVENT_TRADE_INSERT"
    updateEvent="EVENT_TRADE_MODIFY"
    deleteEvent="EVENT_TRADE_CANCEL"
  ></entity-management>
```

Adding schema would allow us to customise form to our needs instead of using autogenerated one. You can see the difference by clicking edit and add button.
```typescript title="home.component.ts"
// In your home.component.ts file
protected addTradeFormSchema: any = {
    type: 'VerticalLayout',
    elements: [
        {
            scope: '#/properties/QUANTITY',
            label: 'Quantity',
        },
        {
            scope: '#/properties/PRICE',
            label: 'Price',
        },
        {
            scope: '#/properties/COUNTERPARTY_ID',
            options: {
                allOptionsResourceName: 'COUNTERPARTY',
                valueField: 'COUNTERPARTY_ID',
                labelField: 'NAME',
            },
            label: 'Counterparty',
        },
        {
            scope: '#/properties/INSTRUMENT_ID',
            options: {
                allOptionsResourceName: 'INSTRUMENT',
                valueField: 'INSTRUMENT_ID',
                labelField: 'NAME',
            },
            label: 'Instrument',
        },
        {
            scope: '#/properties/SIDE',
            label: 'Side',
        },
    ],
};
// ... other component code
```

Now you should be able to see TRADES in the grid and perform CRUD operations on displayed data.

![](/img/angular-tutorial-entities.png)

## Step 3: Incorporate Donut Chart

### 3.1 Add Positions Donut Chart with Configuration

Start by adding chart and its datasource to the template
```html title="home.component.html"
<!-- Donut Chart -->
  <zero-g2plot-chart type="donut" [config]="donutChartConfig">
    <chart-datasource
      resourceName="ALL_CHART_DATA"
      server-fields="SIDE INSTRUMENT_SIDE_ALLOCATION"
      charts-fields="groupBy value"
      isSnapshot="false"
      [criteria]="allocationCriteria"
    ></chart-datasource>
  </zero-g2plot-chart>
```
Then provide configuration for the chart
```typescript title="home.component.ts"
// In your home.component.ts file
protected donutChartConfig: any = {
  angleField: 'value',
  colorField: 'groupBy',
  label: {
    type: 'spider',
    labelHeight: 28,
    content: '{name}\n{percentage}',
    style: {
      fill: 'white',
    },
  },
  interactions: [{ type: 'element-selected' }, { type: 'element-active' }],
};

protected allocationCriteria: string = ''; // Empty string initially
```
The chart should now appear in the bottom left corner

![](/img/angular-tutorial-chart.png)

## Step 4: Handle Row Selection Change
### 4.1 Add Event Handler in HTML

In your component HTML template, add an event handler for row selection change:

```html title="home.component.html"
 <zero-grid-pro
    // highlight-next-line
    (rowClicked)="onRowClicked($event)"
 >
    <grid-pro-genesis-datasource
        resource-name="ALL_POSITIONS"
    ></grid-pro-genesis-datasource>
 </zero-grid-pro>
```
### 4.2 Implement Function Handling Row Selection

Now, implement the `onRowClicked` function in your `home.component.ts` file:

```typescript title="home.component.ts"
// In your home.component.ts file
onRowClicked(e: Event) {
    this.allocationCriteria = `((INSTRUMENT_ID == '${(e as CustomEvent).detail.data.INSTRUMENT_ID}'))`;
}
```

You will be able to select your position, and chart should change to display data for selected position.
