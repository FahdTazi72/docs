---
title: 'Entity Management'
sidebar_label: 'Entity Management'
id: foundation-entity-management
keywords: [entity management, frontend, micro-front-ends, profile management, ui, user management, web]
tags:
  - entity management
  - frontend
  - micro-front-ends
  - profile management
  - ui
  - user management
  - web
---
You can find detailed information on this micro front-end in the [API documentation](./docs/api/index.md).

The `entity-management` micro front-end gives you a grid and a form that you can add to your pages and configure.

The grid takes its data from a specified resource in the back end - a Data Server `query` or a Request Server `requestReply`. You can then add Create and Edit events to the definition, which automatically generate a form from the metadata of the back end resource. Also, buttons are added to the grid automatically so that the user can click to access the forms.

Finally, you can add a Delete event to the definition, which automatically displays a **Delete** button, which the user can click on to delete the relevant record.

:::tip
The event buttons are accessed conditionally. For example, if the current user is only able to edit the entities, then you should only set the edit event on the entity-manager - you need to set the events so that they are conditional on user authorisations.
:::

## Simple set-up

### 1. Insert the grid
To insert the grid into a page, open the file **home.template.ts** and insert the `entity-management` tag. 

The most important attribute of `entity-management` is `resourceName`. This is where you specify the source of the data; in our example, we are using a Data Server resource called ALL_INSTRUMENTS.

```typescript
import {html, } from '@genesislcsap/webcore';
import type {Home} from './home';

export const HomeTemplate = html<Home>`
  <entity-management
      resourceName="ALL_INSTRUMENTS"
  ></entity-management>
`;
```

If you have your application running locally, you can now see the grid in the Home page.

**show grid**

### 2. Insert an event (and create a form)
Inserting an event in your `entity-management` does two things:

- It adds a button to the grid to enable the user to insert, modify or delete a record (depending on the event you have defined).
- For an insert or modify event, it automatically generates a form with all the relevant fields, where the user can submit the new or modified record. Each field in the generated form automatically includes validation and type detection.

In this example, we have added an insert event to insert a new record in this table. This event connects to the Event Handler resource EVENT_TRADE_INSERT in the back end. We have also added a title, using the `title` attribute.

```typescript {4,5}
export const HomeTemplate = html<Home>`
  <entity-management
      resourceName="ALL_INSTRUMENTS"
      title = "Instruments"
      createEvent = "EVENT_TRADE_INSERT"
  ></entity-management>
`;
```

Here is how the grid now looks. Note:

- the title is now Instruments
- the **Add** button is displayed at the top right of the grid

**image with Add button**

If the user clicks on the **Add** button, the form is displayed with all the relevant fields. 

**image of form with fields and submit button**

Finally we could add Modify and Delete events:

```typescript {6,7}
export const HomeTemplate = html<Home>`
  <entity-management
      resourceName="ALL_INSTRUMENTS"
      title = "Instruments"
      createEvent = "EVENT_TRADE_INSERT"
      updateEvent = "EVENT_INSTRUMENT_MODIFY"
      deleteEvent = "EVENT_INSTRUMENT_DELETE"
  ></entity-management>
`;
```
Our grid now looks like this:

**image of form with modify and delete buttons**

Now each record in the grid has an **Edit** and a **Delete** button displayed on the right of the grid.

### Common attributes

The most common attributes you can configure for `entity-management` are listed below. Note that it is not mandatory to specify an event, but if you don't specify a `createEvent` or an  `updateEvent`, then you won't have a form created - which defeats the point of using this micro front-end.

| Attribute                  | Description                                          |   Mandatory |
| -------------------------- | -----------------------------------------------------| ------------|
| `title`                    | customises the title of the entity list so that the user can see what resource they are managing. | Yes |
| `resourceName`             | specifies the name of a resource on the server: a `query` in the Data Server, a `ReqRep` in the Request Server or an `eventHandler` in the Event Handler.  | Yes |
| `createEvent`              | specifies an event on the back end for adding a record to the table; once specified, this displays an **Add** button above the grid. | No |
| `updateEvent`              | specifies an event on the back end for modifying a record in the table; once specified, this displays an **Edit** button to the right of every record in the grid. | No  |
| `deleteEvent`              | specifies an event on the back end for deleting a record in the table; once specified, this displays a **Delete** button to the right of every record in the grid. |  No  |
| `datasourceConfig`         | configures the [interaction with the back-end resource](./docs/api/foundation-entity-management.datasourceconfiguration/#example). | No  |
| `persist-column-state-key` | the user can change columns (the width, for example); if you want the column states to be persisted when the user navigates away from the page, specify a unique string value. By default, changes are **not** persisted, and the grid returns to its default state every time the user navigates away from it. |  No  |

:::warning
The `datasourceConfig` string defines the key where the serialised state of the columns is stored, as an object in [session storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage). If you set multiple `entity-management` in your application, **you must use unique keys** to persist the state - otherwise, you will get undefined behaviour.
:::

For a full list of properties, see the [API documents](./docs/api/foundation-entity-management.entitymanagement.md#properties).

### Customising

#### Grid - changing the order of columns
To follow

#### Grid - removing a column
To follow

#### Form - changing which fields are displayed
This is done using UI schema 
To follow

#### Changing the look - colours
To follow

#### Changing the look - positioning
To follow

#### Changing the look - using variables
inserting variables into the CSS. 
To follow

## User Management

The [User Management](/components/user-management/user-management-introduction/) business component has been built using the Entity Management micro front-end. 

It is designed to enable you to configure user access to the system with the minimum of effort.

## Profile Management

The Profile Management micro front-end is used to manage the profiles on the front end. Two core components are used to manage the profiles - the grid and the form.

:::info
Profile Management is a concrete use case of the [Entity Management](#entity-management) micro front-end, which is provided as part of `foundation-ui`.
:::

Example grid view when managing profiles.

![Example profile management grid](./docs/img/foundation-profile-management.png)

### Set-up

To enable this micro front-end in your application, follow the steps below.

1. Add `@genesislcap/foundation-entity-management` as a dependency in your **package.json** file. Whenever you change the dependencies of your project, ensure you run the bootstrap command again. You can find more information in the [package.json basics](../../../web/basics/package-json-basics/) page.

```javascript
{
  ...
  "dependencies": {
    "@genesislcap/foundation-entity-management": "latest"
  },
  ...
}
```

2. Import and declare the class in the page of the class where you wish to use the Profile Manager. Then add the profile management into the template HTML where required:
```javascript
// Import
import { Profiles } from '@genesislcap/foundation-entity-management';

// Declare class
Profiles;

// Example HTML with the profile management
export const AdminTemplate: ViewTemplate = html`
  <zero-tabs>
    <zero-tab-panel slot="tabpanel">
      <zero-notification-listener>
        <profile-management></profile-management>
      </zero-notification-listener>
    </zero-tab-panel>
  </zero-tabs>
`;
```

### Config

The functionality of the profile manager is customised through the properties you set in the HTML. This section covers the main properties that you will want to customise. For a full list of properties, [see here](./docs/api/foundation-entity-management.profiles.md).

#### Permissions

In contrast to Entity Management, we have a different way of displaying buttons and performing actions here. In this case, they are displayed if the user has the appropriate permissions from the server.

- `INSERT_PROFILE` - the user can add new profiles
- `DELETE_PROFILE` - the user can delete profiles
- `AMEND_PROFILE` - the user can update existing profiles

#### Persist column state
`persist-column-state-key` is a string value that is used to control how the column states are persisted through actions such as page changes or refreshes. If no `persist-column-state-key` property is set, then the behaviour will be to _not_ persist the column state, and the grid will revert back to its default state every time the user navigates away from it.

:::info
For more information on `persist-column-state-key` see [the section in the Entity Management](#persist-column-state) page.
:::

## License

Note: this project provides front-end dependencies and uses licensed components listed in the next section; thus, licenses for those components are required during development. Contact [Genesis Global](https://genesis.global/contact-us/) for more details.

### Licensed components
Genesis low-code platform
