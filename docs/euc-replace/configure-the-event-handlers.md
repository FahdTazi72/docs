---
id: j-config-ehandle
title: Configure the event handlers
sidebar_label: Configure the event handlers

---
It's time to look at your event handlers. At this stage, you have:

* a Reference Data application. This has tables, so you can import the schema to the Trading application
* a Trading application. This contains the schema for the TRADE table, event handlers, data servers and request servers

Now we are going to change the code in the event handler so that it checks that:

* the counterparty exists in the database (by checking COUNTERPARTY_ID field)
* the instrument exists in the database (by checking INSTRUMENT_ID field)

### 1. Mark the fields as mandatory

Mark the two fields as mandatory

In your IDE, go to the TRADE table. Mark the INSTRUMENT_ID and COUNTERPARTY_ID as mandatory.

![](/img/event-s1.png)

### 2. Generate the dao classes

Run maven clean package to generate the dao classes that will be used in the event handler GPAL files.

![](/img/event-s2.png)

### 3. Add the validation code

Go to the **eventhandler.kts** file for the event handler (this was autogenerated by **AppGen**). The file has separate eventHandler blocks to handle insert, modify and delete. The first block is TRADE_INSERT.

Add the verification by inserting an **onVerify** block before the **onCommit** block in TRADE_INSERT. We can see this below, with separate lines checking the Counterparty ID and the Instrument ID exist in the database. The new block ends by sending an **ack()**.

![](/img/event-s3.png)

You can make the same insertion to the TRADE_MODIFY and TRADE_DELETE blocks.

## Testing the event handlers

Now we shall create and run some unit testing for our new event handlers.

### Create test data

### Dependencies

Add **ref_app_data-config** as a dependency with provided scope in the parent pom.

Add the same file as a dependency with test scope in the file **script-config module pom**.

### Create unit tests

### Run the unit tests

Off you go.