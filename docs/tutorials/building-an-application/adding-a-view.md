---
id: add-view
title: Adding a view
sidebar_label: Adding a view
sidebar_position: 3

---
At this stage, you have

* a Ref_data_app (with all its tables). The schema can be imported into the trading_app.
* a trading_app that contains the schema for the TRADE table. This table will be used to generate the event handlers, data servers and request server.

## Create the new the view

You need to create a view that can display relevant information about the trades table (ENHANCED_TRADE_VIEW).

The trading app already has a view created by the **ExcelToGenesis** script. You are now going to add a new view called ENHANCED_TRADE_VIEW. This new view makes it possible to display relevant information about the trades table (ENHANCED_TRADE_VIEW).

The view will have the TRADE table as root, and this root will be joined to ENHANCED_TRADE_VIEW and will join to COUNTERPARTY and INSTRUMENT tables. 

The view will display all the TRADE fields except INSTRUMENT_ID and COUNTERPARTY_ID. You need to replace these two fields with the NAME field extracted from the INSTRUMENT table join and the COUNTERPARTY table join.

In short, you will add INSTRUMENT_NAME and COUNTERPARTY_NAME) to enhance the view with human readable values.

Also remove counterparty name and instrument symbol from the trade table

Run **code gen** for views. This is makes the new view ready for use.

## Add the new view to the data server

Now go to the data server definition (inside the **-script-config** module). Replace the ALL_TRADES query in the data server with the new ENHANCED_TRADE_VIEW.

## Testing

You need to create a unit test showing usage of the view repository generated by our code generation mechanism.

The purpose of the test is to prove you can look up data with the repo and retrieve the joined-up structure. We can show that we can:

* look up by keys
* perform get bulk from the main table.

First you need to do the following:

1. Add a new folder in config and add the **db-test** dependency to this folder.
2. Add the genesis home folder with an empty txt file. This folder is needed for unit tests.  Add TEST_DATA
3. Add a dependency on the **ref_data_app-config module** in pom file

### Test with single trade

### Test with single trade

* use get

### Test with single trade

* but no joins

### Test multiple trades